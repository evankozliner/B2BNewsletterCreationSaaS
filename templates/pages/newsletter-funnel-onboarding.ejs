<!-- Newsletter Funnel Onboarding Flow -->
<div class="onboarding-wrapper">
  <div class="onboarding-container">

    <!-- Progress Indicator -->
    <div class="progress-bar-container" style="display: none;">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-text" id="progressText">Step 1 of 6</div>
    </div>

    <!-- Cover Page -->
    <div class="onboarding-step cover-page" id="cover-page">
      <div class="step-content">
        <a href="https://withpotions.com" class="cover-logo-link" target="_blank" rel="noopener">
          <img src="https://withpotions.com/potions-logo.svg" alt="Potions Logo" class="cover-logo" />
        </a>

        <h1 class="cover-title">Get Your Free Custom Newsletter Funnel</h1>

        <p class="cover-subtitle">We've got some final questions to begin building your free newsletter funnel!</p>

        <div class="cover-meta">
          <span class="time-estimate">‚è±Ô∏è Takes about 5 minutes</span>
        </div>

        <button class="btn-start" id="btn-start">Get Started</button>

        <div class="cover-resources">
          <p class="cover-resources-label">Want to see our work first?</p>
          <div class="cover-resource-links">
            <a href="https://withpotions.com/blog/stat-digital-case-study.html" target="_blank" rel="noopener" class="cover-resource-link">
              üìñ Read our case study
            </a>
            <a href="https://withpotions.com/samples.html" target="_blank" rel="noopener" class="cover-resource-link">
              ‚ú® See sample newsletters
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 1: ICP -->
    <div class="onboarding-step" id="step-1" data-step="1" style="display: none;">
      <div class="step-content">
        <h1>Describe your ideal customer (ICP)</h1>
        <p class="step-helper">Prefer to speak? Use the mic.</p>

        <div class="textarea-container">
          <textarea
            id="icp-input"
            class="voice-textarea"
            placeholder="Example: Mid-market B2B SaaS companies with 50-200 employees looking to improve their content marketing..."
            rows="6"
          ></textarea>
          <button class="mic-button" id="icp-mic" aria-label="Use voice input">
            <svg class="mic-icon" viewBox="0 0 24 24" width="24" height="24">
              <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
              <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
            <span class="mic-text">Tap to speak</span>
          </button>
        </div>

        <div class="voice-status" id="icp-status"></div>

        <button class="btn-next" id="step1-next">Next</button>
      </div>
    </div>

    <!-- Step 2: Email List Size -->
    <div class="onboarding-step" id="step-2" data-step="2" style="display: none;">
      <div class="step-content">
        <h1>What's your current email list size of ICP? (Approximately)</h1>
        <p class="step-helper">This helps us understand the best growth approach for you</p>

        <div class="design-options">
          <label class="design-option">
            <input type="radio" name="email-list-size" value="under-100" />
            <div class="design-card">
              <h3>Under 100</h3>
            </div>
          </label>

          <label class="design-option">
            <input type="radio" name="email-list-size" value="100-1000" />
            <div class="design-card">
              <h3>100 - 1,000</h3>
            </div>
          </label>

          <label class="design-option">
            <input type="radio" name="email-list-size" value="1000-10000" />
            <div class="design-card">
              <h3>1,000 - 10,000</h3>
            </div>
          </label>

          <label class="design-option">
            <input type="radio" name="email-list-size" value="10000-100000" />
            <div class="design-card">
              <h3>10,000 - 100,000</h3>
            </div>
          </label>

          <label class="design-option">
            <input type="radio" name="email-list-size" value="100000+" />
            <div class="design-card">
              <h3>100,000+</h3>
            </div>
          </label>

          <label class="design-option">
            <input type="radio" name="email-list-size" value="dont-know" />
            <div class="design-card">
              <h3>I don't know</h3>
            </div>
          </label>
        </div>

        <div class="step-navigation">
          <button class="btn-back" id="step2-back">Back</button>
          <button class="btn-next" id="step2-next" disabled>Next</button>
        </div>
      </div>
    </div>

    <!-- Step 3: Problems Solved -->
    <div class="onboarding-step" id="step-3" data-step="3" style="display: none;">
      <div class="step-content">
        <h1>What problem(s) does your business solve for your ICP?</h1>
        <p class="step-helper">Prefer to speak? Use the mic.</p>

        <div class="textarea-container">
          <textarea
            id="problems-input"
            class="voice-textarea"
            placeholder="Example: We help marketing agencies automate their client reporting, saving them 10+ hours per week on manual data gathering..."
            rows="6"
          ></textarea>
          <button class="mic-button" id="problems-mic" aria-label="Use voice input">
            <svg class="mic-icon" viewBox="0 0 24 24" width="24" height="24">
              <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
              <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
            <span class="mic-text">Tap to speak</span>
          </button>
        </div>

        <div class="voice-status" id="problems-status"></div>

        <div class="step-navigation">
          <button class="btn-back" id="step3-back">Back</button>
          <button class="btn-next" id="step3-next">Next</button>
        </div>
      </div>
    </div>

    <!-- Step 4: Newsletter Goal -->
    <div class="onboarding-step" id="step-4" data-step="4" style="display: none;">
      <div class="step-content">
        <h1>What's the goal of your newsletter?</h1>
        <p class="step-helper">Prefer to speak? Use the mic.</p>

        <div class="textarea-container">
          <textarea
            id="goal-input"
            class="voice-textarea"
            placeholder="Example: Build trust with prospects and nurture them toward a sales conversation..."
            rows="6"
          ></textarea>
          <button class="mic-button" id="goal-mic" aria-label="Use voice input">
            <svg class="mic-icon" viewBox="0 0 24 24" width="24" height="24">
              <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
              <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
            <span class="mic-text">Tap to speak</span>
          </button>
        </div>

        <div class="voice-status" id="goal-status"></div>

        <div class="examples-section">
          <p class="examples-label">Examples:</p>
          <ul class="examples-list">
            <li>Generate qualified leads for my sales team</li>
            <li>Establish thought leadership in my industry</li>
            <li>Keep existing customers engaged and reduce churn</li>
          </ul>
        </div>

        <div class="step-navigation">
          <button class="btn-back" id="step4-back">Back</button>
          <button class="btn-next" id="step4-next">Next</button>
        </div>
      </div>
    </div>

    <!-- Step 5: Content Sources -->
    <div class="onboarding-step" id="step-5" data-step="5" style="display: none;">
      <div class="step-content">
        <h1>Where do you produce content today?</h1>
        <p class="step-helper">Select at least one option (or let us know if you don't produce content yet)</p>

        <div class="content-sources">
          <label class="content-source-option">
            <div class="source-header">
              <input type="checkbox" name="content-source" value="linkedin" />
              <span class="source-name">LinkedIn</span>
            </div>
          </label>

          <label class="content-source-option">
            <div class="source-header">
              <input type="checkbox" name="content-source" value="blog" />
              <span class="source-name">Blog / Website</span>
            </div>
          </label>

          <label class="content-source-option">
            <div class="source-header">
              <input type="checkbox" name="content-source" value="podcast" />
              <span class="source-name">Podcast</span>
            </div>
          </label>

          <label class="content-source-option">
            <div class="source-header">
              <input type="checkbox" name="content-source" value="other" />
              <span class="source-name">Other</span>
            </div>
            <input
              type="text"
              class="source-url-input"
              data-source="other"
              placeholder="Describe your content source..."
              disabled
            />
          </label>

          <label class="content-source-option">
            <div class="source-header">
              <input type="checkbox" name="content-source" value="none" />
              <span class="source-name">I don't produce content anywhere</span>
            </div>
          </label>
        </div>

        <div class="step-navigation">
          <button class="btn-back" id="step5-back">Back</button>
          <button class="btn-next" id="step5-next" disabled>Next</button>
        </div>
      </div>
    </div>

    <!-- Step 6: Revenue Strategy -->
    <div class="onboarding-step" id="step-6" data-step="6" style="display: none;">
      <div class="step-content">
        <h1>How do you currently get leads at the top of your funnel?</h1>
        <p class="step-helper">Select at least one channel (or add your own)</p>

        <div class="acquisition-container">
          <div class="custom-channel-section">
            <p class="custom-channel-label">Add your own channel:</p>
            <div class="custom-channel-input-group">
              <input
                type="text"
                id="custom-channel-input"
                placeholder="e.g., LinkedIn outreach, Events, Webinars..."
                maxlength="50"
              />
              <button class="btn-add-channel" id="add-channel-btn">Add</button>
            </div>
          </div>

          <div class="common-channels-section">
            <p class="common-channels-label">Or choose from common channels:</p>
            <div class="channel-cloud" id="channel-cloud">
              <!-- Channel chips will be inserted here -->
            </div>
          </div>

          <div class="selected-channels-summary" id="selected-channels-summary">
            <span class="channels-count">0 selected</span>
          </div>
        </div>

        <div class="additional-notes">
          <label for="acquisition-notes">Anything else we should know?</label>
          <textarea
            id="acquisition-notes"
            placeholder="Tell us about your current lead generation strategy, challenges, or goals..."
            rows="4"
          ></textarea>
        </div>

        <div class="step-navigation">
          <button class="btn-back" id="step6-back">Back</button>
          <button class="btn-submit" id="step6-submit" disabled>Submit</button>
        </div>
      </div>
    </div>


    <!-- Thank You Page -->
    <div class="onboarding-step thank-you-page" id="thank-you" style="display: none;">
      <div class="step-content">
        <div class="success-icon">
          <svg viewBox="0 0 52 52" width="80" height="80">
            <circle cx="26" cy="26" r="25" fill="none" stroke="#5D5DED" stroke-width="2"/>
            <path fill="none" stroke="#5D5DED" stroke-width="3" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
          </svg>
        </div>

        <h1>We're building your custom newsletter funnel + plan now</h1>

        <p class="thank-you-message">
          Thank you for completing our onboarding! Our team is reviewing your inputs and creating a personalized newsletter strategy tailored to your business.
        </p>

        <div class="next-steps">
          <h2>What happens next?</h2>
          <ol class="next-steps-list">
            <li>We will look at your responses and business to recommend a custom funnel for you</li>
            <li>Attend your onboarding call and we will discuss your newsletter funnel</li>
          </ol>
        </div>

        <div class="resources-section">
          <h2>Want to see what we can do?</h2>
          <div class="resource-links">
            <a href="https://withpotions.com/blog/stat-digital-case-study.html" target="_blank" rel="noopener" class="resource-link">
              <span class="link-icon">üìñ</span>
              <span class="link-text">Read our case study</span>
            </a>
            <a href="https://withpotions.com/samples.html" target="_blank" rel="noopener" class="resource-link">
              <span class="link-icon">‚ú®</span>
              <span class="link-text">See sample newsletters</span>
            </a>
          </div>
        </div>


        <div class="summary-section" id="summary-section">
          <h2>Your Selections</h2>
          <div class="summary-grid" id="summary-grid">
            <!-- Summary will be inserted here -->
          </div>
        </div>

        <div class="start-over-section">
          <button class="btn-start-over" id="btn-start-over">Start Over</button>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- JavaScript Modules -->
<script src="<%= baseUrl %>js/onboarding/state-manager.js" defer></script>
<script src="<%= baseUrl %>js/onboarding/voice-input.js" defer></script>
<script src="<%= baseUrl %>js/onboarding/topic-chips.js" defer></script>
<script src="<%= baseUrl %>js/onboarding/section-selection.js" defer></script>
<script src="<%= baseUrl %>js/onboarding/recommendations-adapter.js" defer></script>
<script src="<%= baseUrl %>js/onboarding/app.js" defer></script>
